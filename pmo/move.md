# Регламент движения задач
В работе руководствуется [принципами](principles.md).

## Инициация
Список задач от продакта, который он перегружает из ишью гитлаба. Задача заводится по специальному шаблону, описанному в разделе «[Фиксация требований](requirements.md)».

Продакт запускает [процесс приоритизации задачи и размещает ее в роадмапе](roadmap.md).

## Анализ
На планировании менеджер проектов или продуктовый дизайнер набирают в работу задачи согласно приоритетам в РМ.

Проверяют задачу на правильность заполнения и полноту требований. Если необходимо, дополняют техническое задание дизайном или другими подробностями, необходимыми для начала разработки. 

Для определения готовности задачи к передаче в разработку мы будем использовать Scrum-артефакт «[Definition of Ready](dor.md)».

Завершив анализ по задаче, исполнитель:
- двигает свою подзадачу в статус «Готово», 
- двигает родительскую задачу в статус «К выполнению»,
- если разработка задачи не запланирована в текущем спринт, то снимает с нее метку текущего спринта,
- остается ответственным по задаче, не убирает свою аватарку с задачи. 

## К выполнению
Колонка-накопитель, которая хранит задачи запланированные на спринт. По мере готовности, ответственный разработчик берет в работу произвольную задачу и меняет у нее следующие параметры:
- статус задачи = Разработка,
- статус подзадачи = Разработка.

## Разработка
Пока взятая в работу задача не будет переведена в статус Тестирование, или не возникнут другие факторы, препятствующие выполнению задачи, новые задачи в работу не берутся.

    При возникновении таких факторов, разработчик оставляет комментарий в родительской задаче. Если работа заблокирована по причине другого разработчика, то доводит до него информацию о своем блокере, если причин не связана с другим человеком, или человек неопределен, то доводит эту информацию до менеджера.

Задача разработчика как можно быстрее перевести родительскую задачу в статус Тестирование. Критерии перехода зафиксированы в чек-листе разработчика:
- субъективно считает, что реализовал все требования из ТЗ,
- задокументировал API,
- код прошел ревью у коллег,
- вручную прошел все позитивные юзкейсы из ТЗ,
- в последнем коммите закрыл ишью,
- сделал MR в релизную ветку текущего спринта,
- добавил ссылку на MR в задачу,
- написал регламент деплоя, если он нестандартный,
- сверился с тест-планом тестировщика и дополнил его при необходимости,
- перед переводом задачи в статус Тестирование проверил, что новых конфликтов не появилось.

Если у задачи несколько исполнителей, то они наделяются равной ответственность за движение задачи вперед. На планировании они договариваются, как будут действовать и поддерживают друг-друга до тех пор, пока задача не окажется в колонке Протестировано. Они совместно проходят чек-лист разработчика и двигают родительскую задачу в тестирование по взаимному согласованию.

---

### Приоритеты разработчика
Если так вышло, что у разработчика скопилось несколько задач в колонке Разработка, то он использует следующую схему приоритизации:
- Критические и блокирующие дефекты с боя.
- Задачи или дефекты вернувшиеся с тестирования.
- Задачи или дефекты вернувшиеся с ревью.
- Все остальные задачи.

## Ревью
На ревью приходят только подзадачи. Родительская задача не двигается. Ответственный за ревью ежедневно разбирает пришедшие к нему задачи. По возможности, делать это как можно быстрее, чтобы не задерживать задачу своих коллег.

Ревьюер самостоятельно определяет задачу, где он является ответственным. Если подзадача называется Бэк, значит требуется ревью бэкенда, с фронтендом по аналогии.

Если задача не прошла ревью, то проверяющий пишет комментарий и меняет её статус на Разработка.

Если прошла — меняет ее статус на Тестирование.

## Тестирование
Ведущий тестировщик создает новую релизную ветку сразу после завершения предыдущего спринта. Публикует её название в канал develop.

Тестировщики разбирают колонку на свое усмотрение или по договоренности с менеджером. 

Ответственный тестировщик заходит в задачу и назначает на себя соответствующую подзадачу и двигает ее в статус Тестирование.

Самостоятельно, или при поддержке разработки, заливает задачу на тестовый стенд. Номер тестового стенда определяется по договоренности с ведущим тестировщиком. Приступает к тестированию задачи по тест-плану. В первую очередь проверяются позитивные сценарии. Если позитивный сценарий заблокирован по причине неполной реализации задачи, то такая задача сразу возвращается в Разработку с блокирующим дефектом.

Дефекты всегда заводятся в родительскую задачу в виде чек-листа. Чек-лист с дефектами должен располагаться над тест-планом. Картинки или видеозаписи фиксируются в виде ссылки. Если тестировщик понимает чей это дефект, он сразу назначает ответственного.

По окончанию тестирования, в случае наличия критических, блокирующих или большого количества прочих дефектов возвращает задачу в разработку, путем установки у родительской задачи статуса Разработка.

Если по задаче зафиксированы некритические дефекты, и исправить их в рамках текущего спринта невозможно, то согласует их пропуск с менеджером проекта или, в случае его отсутствия, с ответственным проектировщиком. Это делается для того, чтобы не задерживать задачу в тестировании и не увеличивать метрику Time to Market. Если пропуск согласован, то дополнительно выносит их в отдельную задачу.

Такая задача заводится по следующим правилам:
- Списки = Баги + Следующий спринт.
- Статус = К выполнению.
- Ответственные = Разработчик/и из родительской задачи.
- Срок исполнения = весь следующий спринт
- Установка связи между новой задачей и родительской в виде коммента.

Задача тестировщика как можно быстрее перевести родительскую задачу в статус Протестировано. Критерии перехода зафиксированы в чек-листе:
- С ведущим тестировщиком согласован список необходимых автоматических тестов.
- Такие задачи заведены и прилинкованы в виде комментариев.
- Весь чек-лист закрыт или согласован пропуск некоторых пунктов.

Разработчику не обязательно ждать, когда задача вернется в разработку, если шестое чувство подсказывает ему, что с задачей не все ладно, он может зайти в задачу раньше и приступить к исправлению дефектов. 

---

### Регресс
После крупных релизов, тестировщики проверяют базовые сценарии и смотрят на все задачи попавшие в релиз. Чтобы не смотреть одинаковые кейсы, самостоятельно договариваются о распределении задач.

Критерий крупности старший тестировщик определяет самостоятельно и просит провести регресс. 

---

### Дефект на проде
Дефекты с прода заводятся по шаблону из КликАпа. Если дефект критический, то он заводится по шаблону:
- Спринт = текущий спринт 
- Статус = Разработка
- Срок исполнения = текущий день и до конца спринта

Информация о нем сразу доносится до команды через канал develop. Вся команда обращает внимание на дефект и быстро ищет исполнителя.

Если дефект некритичный, то он просто заводится в список Баги в статус К выполнению.

Ответственный тестировщик контролирует движение дефекта и инициирует хотфикс.

## Протестировано
Колонка-накопитель, здесь задачи живут до ближайшего понедельника.

В течение недели ведущий тестировщик:
1. Заходит в таску в кликапе.
2. Переходит по прикрепленному МР.
3. В гитлабе проверяет, чтобы таргет-ветка была равна текущему релизу и смерживает ветки. 
4. Отмечает в таске тег Релиз. 

В понедельник ведущий тестировщик морозит релизную ветку: 
1. В гитлабе ставит фильтр на ветку релиза и проверяет, что все таски из колонки Протестировано смержены с релизной веткой. А также, что нет лишних тасок.
2. Деплоит на стенд Препрод.
3. Смотрит какие тесты упали, если все ожидаемо — запускает регресс.

Менеджер проектов готовит к публикации описание релиза и ждет, когда ведущий тестировщик пришлет ссылку на МР релизной ветки в мастер. Если нет причин заблокировать релиз, менеджер просит кого-то из разработки выкатить релиз в бой. 

Когда релиз окажется на бою, менеджер меняет статус задач из релиза на Готово и закрывает спринт. Дальше он переходит к подведению итогов спринта и собирает [командные метрики](metrika.md).